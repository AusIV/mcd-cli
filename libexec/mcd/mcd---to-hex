#!/usr/bin/env bash
set -e

tc () {
  flip=$(tr 01 10 <<< "$1");
  res=$(bc <<<"ibase=2; obase=2; $(pad $flip) + 1");
  echo $res;
}

pad () {
  printf -v res "%08d" $1;
  echo $res;
}

if [[ $1 =~ ^-[[:digit:]]+$ ]]; then
  binary=$(pad $(bc <<<"ibase=10; obase=2; ${1:1:${#1}}"));
  twos=$(tc $binary)
  printf '%x\n' "$((2#$twos))"
else
  seth --to-hex $1
fi
