#!/usr/bin/env bash
### mcd-dai -- Dai balances
### Usage: mcd dai [<command>]
set -e

case $1 in
  balance) {
    urn=$(seth --to-word ${2:-$ETH_FROM})
    bal=$(seth call $MCD_VAT 'dai(bytes32)(uint256)' "$urn")
    echo $(mcd --to-rad $bal)
  };;
  supply) {
    mcd debt
  };;
  join) {
    urn=$(seth --to-word $ETH_FROM)
    wad=$(seth --to-word $(seth --to-wei $2 eth))
    (set -x; seth send $MCD_JOIN_DAI "join(bytes32, uint256)" $urn $wad)
  };;
  exit) {
    guy=$(seth --to-addres $ETH_FROM)
    wad=$(seth --to-word $(seth --to-wei $2 eth))
    (set -x; seth send $MCD_JOIN_DAI "exit(address, uint256)" $guy $wad)
  };;
  *) {
    echo "Options:"
    echo "  balance [<address>]"
    echo "  join <wad>"
    echo "  exit <wad>"
    echo "  supply"
  }
esac
